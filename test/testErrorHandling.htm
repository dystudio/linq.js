<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>linq.js test:Action</title>
    <script type="text/javascript" src="../jsunit/app/jsUnitCore.js"></script>
    <script type="text/javascript" src="../linq.js"></script>
</head>
<body>
    <!-- This file is linq.js test for JsUnit -->
    <script type="text/javascript">
        var E = Enumerable;
        var result;
        var correct;

        function testCatch()
        {
            var msg;
            result = E.Range(1, 10).Select(function (i)
            {
                if (i == 5) throw new Error("aiueo");
                return i;
            })
            .Catch(function (e)
            {
                msg = e.message;
            })
            .ToArray();
            correct = [1, 2, 3, 4];
            assertArrayEquals(correct, result);
            assertEquals("aiueo", msg);
        }

        function testFinally()
        {
            var msg;
            result = E.Range(1, 10).Select(function (i)
            {
                if (i == 5) throw new Error("aiueo");
                return i;
            })
            .Catch(function (e)
            {
                msg = e.message;
            })
            .Finally(function (f)
            {
                msg += "f";
            })
            .ToArray();
            correct = [1, 2, 3, 4];
            assertArrayEquals(correct, result);
            assertEquals("aiueof", msg);
        }


    </script>
</body>
</html>
